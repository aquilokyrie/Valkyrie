F._setMod("navplus");F._fileMap({"/js/min_nav_8b2ff0d7.js":["config","log/nav_all","nav/nused_constructor","nav/nused_load","nav/nav_load","nav/data_util","nav/nused_opts","nav/nav_constructor","start/nav_start"],"/js/nav_load_830a1db5.js":["nav/nav_util","nav/nused","nav/nav_exchange","common/name_sug","common/placeholder","common/sug_layer","common/sug","common/url_sug","nav/nadd_constructor","nav/nav_addform","nav/nav_item","nav/dir_item","nav/nplus","nav/nori","nav/nav","nav/nav_edit","nav/nav_opts","nav/nori_drag","nav/nav_drag","nav/dir_drag"],"/js/nadd_load_98ad3304.js":["nav/nadd_load","nav/nadd"],"/css/nav_min_9613fa2d.css":["nav_nall.css","nav_nused.css","nav.css","nav_nori.css","nav_nplus.css","nav_nadd.css","skin.css","skin_opacity.css"],"/css/nav_e409e7b3.css":["nav_edit.css","nav_rename_widget.css","dir_rename_widget.css","index_nav_addform.css","sug.css","nused_opts.css","nav_opts.css"],"/js/del_added_tip_2dd745ad.js":["tip/del_added_tip"],"/css/del_added_tip_921453c3.css":["nav_del_added_tip.css"],"/js/extend_tip_5217437f.js":["tip/nused_extend_tip"],"/css/nused_extend_tip_36f49658.css":["nav_used_extend_tip.css"],"/js/update_tip_ebf7d265.js":["tip/nused_update_tip"],"/css/nused_update_tip_8354a2ad.css":["nav_used_update_tip.css"]});F._defService("navplus",{load:"start/nav_start"});F._useConfig=true;F._firstScreenJS=F._firstScreenJS||[];F._firstScreenJS.push("/js/min_nav_8b2ff0d7.js");F.module("navplus:log/nav_all",function(c,b,a){b.init=function(){F.addLog("navplus:nav",{navClick:"0100100001",tabChange:"0100200001",menuClick:"0100300001",naddClick:"0100400001",navEditClick:"0100500001",navTipShow:"0100600000",navNewsClick:"0100700001",navOperate:"0100100002"});F.addLog("navplus:tip",{navTipShow:"0100600000"})}});F.module("navplus:nav/nused_constructor",function(g,e,c){g("nav_nused.css");var a=new $.Strpx("font-size:20px; font-family:'Microsoft Yahei';");var f={skeleton:'<div id="s_nused" class="s-nused"><div id="s_nav_ctner" class="s-nav-ctner">#{navs}</div></div>',used:'<div id="s_used_navs" class="s-used-navs #{usedCName}"><div class="used-title">常用网址</div><div class="s-used-area">#{used}</div><a id="s_used_close" href="#" class="s-used-close" onclick="return false;" hidefocus>清空常用</a></div>',hot:'<div id="s_hot_navs" class="s-hot-navs #{hotCName}"><div class="hot-title">热门网址</div><div class="s-hot-area">#{hot}</div></div>',bignav:'<a data-id="#{id}" class="nav-item nav-big #{classname}" href="#{url}" title="#{name}" target="_blank" hidefocus><img width="115" height="70" src="#{bigIconUrl}"/></a>',smallnav:'<a data-id="#{id}" class="nav-item nav-small #{classname}" href="#{url}" title="#{name}" target="_blank" hidefocus><img src="#{iconUrl}" height="16" width="16"/><em>#{name}</em></a>',blank:'<span class="nav-blank #{classname}"><div class="nav-blank-bg"></div></span>',nall:'<div id="s_nall" class="s-nall s-skin-opacity-background"><div id="s_nall_tabs" class="s-nall-tabs"><a href="#" class="tab-nav #{hotTab}" onclick="return false;" hidefocus>我的导航</a><a href="#" class="tab-used #{usedTab}" onclick="return false;" hidefocus>推荐导航</a></div></div>'};e.render=function(k){var i=h(k.used),j=b(k.hot,k.used);return $.formatString(f.skeleton,{navs:i+j})};e.renderNall=function(i){return $.formatString(f.nall,{usedTab:s_session.userTips.showAllTab?"":"tab-on",hotTab:s_session.userTips.showAllTab?"tab-on":""})};var h=function(k){var i=[],j="";if(k.length){$.each(k,function(l,m){i.push(d(m,l))})}else{j="unshown"}return $.formatString(f.used,{used:i.join(""),usedCName:j})};var b=function(l,k){var j=[],i="";if(k.length){i="two-lines"}else{i="three-lines"}$.each(l,function(m,n){j.push(d(n,m))});return $.formatString(f.hot,{hot:j.join(""),hotCName:i})};var d=function(j,i){j.classname="";if((i+1)%7==0){j.classname+=" nav-right"}if(!j.id){return $.formatString(f.blank,j)}j.url=decodeURIComponent(j.url);j.classname+=j.nType?" ntype-"+j.nType:"";if(j.bigIconUrl){j.bigIconUrl=decodeURIComponent(j.bigIconUrl);j.bigIconUrl=$.formatString(j.bigIconUrl,{imgpath:$.isIE6?"8":"24"});return $.formatString(f.bignav,j)}else{j.iconUrl=decodeURIComponent(j.iconUrl);return $.formatString(f.smallnav,j)}};e.renderNav=d});F.module("navplus:nav/nused_load",function(e,c,a){var g=e("superplus:common/user_attr"),h=e("nav/data_util");var f,b=!!s_session.sample_value,d=1;c.load=function(i){if($("#s_nused")[0]){i&&i($("#s_nall, #s_nused"));a.fire("nusedLoad")}else{$.ajaxsyncget(s_domain.baseuri+"/nplus/data/hottab",function(j){if(j.errNo==0){h.init(j,"nused");a.use("nav/nused_constructor",function(k){if(!$("#s_nall")[0]){$("#s_content_1").html(k.renderNall())}if($("#s_nused")[0]){return}$("#s_nall").append(k.render(j.data));if($.isIE6){setTimeout(function(){$("#s_used_close").toggleClass("s-xxx-ie6")},1000)}if(g.getAttr("navUsedUpdateTip")){F.call("navplus:tip/nused_update_tip","init")}if(i){$("#s_nused").css("display","none");i($("#s_nused"));a.fire("nusedLoad")}else{if(!b){F.call("superplus:skeleton/skeleton","changeTo",1)}else{F.call("superplus:skeleton/skeleton","sendLoadTime",d)}}$("#s_nall").one("mouseover",function(){a.use("nav/nused",function(l){l.init()})})})}else{F.use("superplus:skeleton/skeleton",function(l){l.loadError($("#s_content_1"));if(i){var k=$("#s_content_1").find(".s-load-error");k.css("display","none");i(k)}else{if(!b){l.changeTo(1)}else{F.call("superplus:skeleton/skeleton","sendLoadTime",d)}}})}})}}});F.module("navplus:nav/nav_load",function(b,f,i){var e=b("nav/nused_constructor"),c=b("superplus:common/user_attr"),g=b("nav/data_util"),h=!!s_session.sample_value,a=1;f.load=function(j){if($("#s_nav")[0]){j&&j($("#s_nall, #s_nav"))}else{$.ajaxsyncget(s_domain.baseuri+"/nplus/data/nav",function(k){if(k.errNo==0){g.init(k,"nav");if(!$("#s_nall")[0]){$("#s_content_1").html(e.renderNall())}if($("#s_nav")[0]){return}if(!k.isNplus){i.use("nav/nav_constructor",function(l){$("#s_nall").append(l.renderNoriAll(k.data[0])).css("display","");d({dom:$("#s_nori_navs")});i.listen("nav","layoutChange",d);if(j){$("#s_nav").css("display","none");j($("#s_nav"))}else{if(!h){F.call("superplus:skeleton/skeleton","changeTo",1)}else{F.call("superplus:skeleton/skeleton","sendLoadTime",a)}}$("#s_nall").one("mouseover",function(){i.use("nav/nav",function(m){m.init()})})})}else{i.use("nav/nav_constructor",function(l){$("#s_nall").append(l.renderNplusAll(k.data)).css("display","");d({dom:$("#s_nplus_navs")});i.listen("nav","layoutChange",d);if(j){$("#s_nav").css("display","none");j($("#s_nav"))}else{if(!h){F.call("superplus:skeleton/skeleton","changeTo",1)}else{F.call("superplus:skeleton/skeleton","sendLoadTime",a)}}$("#s_nall").one("mouseover",function(){i.use("nav/nav",function(m){m.init()})})})}}else{F.use("superplus:skeleton/skeleton",function(m){m.loadError($("#s_content_1"));if(j){var l=$("#s_content_1").find(".s-load-error");l.css("display","none");j(l)}else{if(!h){m.changeTo(1)}else{F.call("superplus:skeleton/skeleton","sendLoadTime",a)}}})}})}};var d=function(k){var j=$(k.dom);if(!j[0]){return}if($.isIE6){setTimeout(function(){$("#s_nav")[0].className=s_session.userProp.isNplus?"s-nplus":"s-nori"},10)}i.fire("heightChange",{dom:$("#s_nav")})}});F.module("navplus:nav/data_util",function(d,f,k){var g={},c={},i=12;f.init=function(l,m){if(m=="nused"){_nused=l.data}else{if(l.isNplus==1){i=l.defaultDirId||12;c=l.data}else{c=l.data}}};var h=function(t,q){var s=null;if(q=="nused"){for(var p=0,m=_nused.used.length;p<m;p++){if(_nused.used[p].id==t){s=_nused.used[p];s.clfType="nused";break}}if(!s){for(var p=0,m=_nused.hot.length;p<m;p++){if(_nused.hot[p].id==t){s=_nused.hot[p];s.clfType="hot";break}}}}else{for(var p=0,m=c.length;p<m;p++){var r=c[p].navs;for(var o=0,n=r.length;o<n;o++){if(r[o].id==t){s=r[o];s.dirId=c[p].dirId;s.dirName=c[p].dirName;break}}}}return s};var b=function(n,l){n=n||"";l=l||"";var m="";if("s_rp"==n||"u_rp"==n){var o=l.split("-");if(o.length!=4){m="s_rp_other"}else{if(o[0]+"-"+o[1]!="rp-0"){if(o[0]+"-"+o[1]=="rp-2"){m=(n=="s_rp"?"s_rp2_"+o[2]:"u_rp2_"+o[2])}else{m="s_rp_other"}}else{m=(n=="s_rp"?"s_rp_"+o[2]:"u_rp_"+o[2])}}}else{if("u_res"==n){m="u_"+l}else{if("u_app-import"==n){m="u_app_import"}else{if("u_share"==n){m="u_tmpage"}else{m=n}}}}m=m.replace(/-/g,"_");return m};var j=function(o,l){var n=h(o,l)||{},m={name:n.name,url:n.url,tab:l,source:n.source,ubsSource:n.ubsSource||b(n.source,n.src_extra),nType:n.nType};if(l=="nused"){m.hasUsed=($("#s_nused").find(".ntype-comm").length>0?1:0);m.hasAdd=($("#s_nused").find(".ntype-add").length>0?1:0);m.hasHot=($("#s_nused").find(".ntype-hot").length>0?1:0);m.clfType=n.clfType}else{m.isNplus=s_session.userProp.isNplus;if(s_session.userProp.isNplus){m.dirId=n.dirId;m.dirName=n.dirName}}return m};var a=function(o){o=$.trimAll(o);var n=$("#s_nplus_ctner").find(".s-ncf-name-link");for(var m=0,l=n.length;m<l;m++){if(o==$(n[m]).attr("data-dirname")){return true}}return false};var e=function(l,m){$.ajaxpost(s_domain.baseuri+"/nplus/submit/nav",{cmd:"add_dir",dirName:l},function(n){if(n.errNo==0){s_session.userTips.isCustomDir=true;var o=n.data.dirId;k.fire("dirAdded",{dirId:o,dirName:l})}m&&m(n)})};f.delDir=function(l){$.ajaxpost(s_domain.baseuri+"/nplus/submit/nav",{dirIds:l,cmd:"del_dir"},function(){})};f.renameDir=function(m,l,o){var n={cmd:"rename_dir",dirId:m,dirName:l};$.ajaxpost(s_domain.baseuri+"/nplus/submit/nav",n,function(p){if(p.errNo==0){s_session.userTips.isCustomDir=true}o&&o(p)})};f.getParams=j;f.defaultDirId=i;f.isDirExist=a;f.addDir=e});F.module("navplus:nav/nused_opts",function(d,c,a){d("nused_opts.css");var e=d("navplus:nav/nused_constructor");c.init=function(){a.listen("nav/nav_item","editNav",function(f){b(f)})};var b=function(g){var f=getNused(g.id);if(f){f.before(e.renderNav(g));f.remove()}}});F.module("navplus:nav/nav_constructor",function(d,f,m){d("nav_nori.css");var g=d("nav/data_util");var h={nav:'<li id="s_nav_#{id}" class="s-#{ntype}-nav"><div class="s-#{ntype}-inner"><a href="#{url}" data-id="#{id}" class="s-nav-name" title="#{name}" target="_blank" hidefocus=""><img width="16" height="16" src="#{iconUrl}"><em class="sc-dragitem">#{name}</em></a></div><a class="nav-del" title="删除" href="#" hidefocus onclick="return false;"></a></li>',blank:'<span class="s-nav-blank"><div class="s-nav-blank-bg"><a id="s_nav_blank_add" class="s-nav-blank-add" href="#" onclick="return false;" hidefocus></a></div></span>',ske:'#{navs}<div class="s-nav-opts" id="s_nav_opts"><a href="#" class="s-nav-opt edit #{unshown}" onclick="return false;" title="管理我收藏的网址" hidefocus>编辑</a><a href="#" class="s-nav-opt add" onclick="return false;" title="添加网址" hidefocus>添加#{recomm}</a></div>',dir:'<div id="s_ncf_#{dirId}" data-dirid="#{dirId}" class="s-ncf #{first} #{unshown}"><div id="s_ncf_name_#{dirId}" class="s-ncf-name"><a href="#" onclick="return false;" class="s-ncf-name-link" data-dirname="#{dirName}" title="#{dirName}">#{dirName}</a></div><ul id="s_ncf_navs_#{dirId}" class="s-ncf-navs">#{navs}</ul></div>',dir_add:'<li class="s-nplus-add-btn #{blank}" id="s_nplus_add_btn_#{dirId}"><a href="#" onclick="return false;" hidefocus></a><span>直接添加或拖入网址到该分类</span></li>',dir_del:'<li class="s-nplus-del-btn" id="s_nplus_delete_btn_#{dirId}"><a href="#" onclick="return false;" hidefocus><span></span>删除分类</a></li>',dir_rename:'<a class="s-ncf-name-rename" href="#" onclick="return false;" title="修改分类名称" id="s_nplus_dir_rename_#{dirId}" hidefocus></a>'};f.renderNoriAll=function(o){return'<div id="s_nav" class="s-nori">'+i(o)+"</div>"};var i=function(p){if(s_session.userTips.recNavTip){m.fire("navTipShow",{tipType:"recommendTip"})}if(p.navs&&p.navs.length){var o=[];$.each(p.navs,function(q,r){o.push(j(r))});return $.formatString(h.ske,{navs:'<div id="s_nori_ctner" class="s-nori-ctner"><ul class="s-nori-navs" id="s_nori_navs">'+o.join("")+"</ul></div>",unshown:"",pos:"",recomm:s_session.userTips.recNavTip?"<span></span>":"",ntype:"nori"})}else{return $.formatString(h.ske,{navs:h.blank,unshown:"unshown",pos:"pos-absolute",recomm:s_session.userTips.recNavTip?"<span></span>":"",ntype:"nori"})}};f.renderNplusAll=function(o){return'<div id="s_nav" class="s-nplus">'+a(o)+"</div>"};var a=function(t){if(s_session.userTips.recNavTip){m.fire("navTipShow",{tipType:"recommendTip"})}var s=true,r=0;for(var q=0,o=t.length;q<o;q++){if(t[q].navs.length>0){s=false;r=q;break}}if(!s){var p=[];$.each(t,function(w,u){var v=[];if(u.navs&&u.navs.length){$.each(u.navs,function(x,y){v.push(l(y))})}p.push($.formatString(h.dir,{dirId:u.dirId,dirName:u.dirName,navs:v.join(""),first:w==r?"first":"",unshown:u.navs.length?"":"unshown"}))});return $.formatString(h.ske,{navs:'<div id="s_nplus_ctner" class="s-nplus-ctner">'+p.join("")+"</div>",unshown:"",pos:"",recomm:s_session.userTips.recNavTip?"<span></span>":"",ntype:"nplus"})}else{return $.formatString(h.ske,{navs:h.blank,unshown:"unshown",pos:"pos-absolute",recomm:s_session.userTips.recNavTip?"<span></span>":"",ntype:"nplus"})}};var j=function(o){return $.formatString(h.nav,{id:o.id,url:decodeURIComponent(o.url),name:o.name,iconUrl:o.iconUrl,title:o.name,ntype:"nori"})};var l=function(o){return $.formatString(h.nav,{id:o.id,url:decodeURIComponent(o.url),name:o.name,iconUrl:o.iconUrl,title:o.name,ntype:"nplus"})};var e=function(){return h.blank};var c=function(o){return $.formatString(h.dir,{dirId:o.dirId,dirName:o.dirName,navs:"",first:o.first?"first":"",unshown:o.unshown})};var b=function(o){var p="";if(o.dirId!=g.defaultDirId){p=$.formatString(h.dir_del,o)}return $.formatString(h.dir,{dirId:o.dirId,dirName:o.dirName,navs:p,first:o.first?"first":"",unshown:o.unshown})};var k=function(o){var p="";if(o!=g.defaultDirId){p=$.formatString(h.dir_del,{dirId:o})}return p};var n=function(o){return $.formatString(h.dir_rename,{dirId:o})};f.renderNori=j;f.renderNplus=l;f.renderBlank=e;f.renderDir=c;f.renderDel=k;f.renderBlankDir=b;f.renderDirRename=n;f.renderNoris=i;f.renderNpluss=a});F.module("navplus:start/nav_start",function(c,b,a){b.init=function(){F.call("navplus:log/nav_all","init");if(!s_session.userTips.showAllTab){F.call("navplus:nav/nused_load","load")}else{F.call("navplus:nav/nav_load","load")}}});F.call("navplus:start/nav_start","init");