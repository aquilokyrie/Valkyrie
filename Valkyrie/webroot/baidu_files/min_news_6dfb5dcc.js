F._setMod("newsplus");F._fileMap({"/js/min_news_c0a7e3d3.js":["config","start/news_start","common/conf","log/news_all","news/news_constructor","news/img_action","news/tab_change","news/change_for_change","news/words_contructor","hotsug/init_sug","tools/strpx","tools/throttle","hotsug/hot_newlabel"],"/js/hot_sug_3f102334.js":["hotsug/hot_sug"],"/css/hot_sug_f56c4552.css":["hot_sug.css"],"/css/news_min_f6918a55.css":["news_init.css","skin.css","skin_opacity.css"]});F._firstScreenJS=F._firstScreenJS||[];F._firstScreenJS.push("/js/min_news_c0a7e3d3.js");F.module("newsplus:start/news_start",function(d,c,a){d("news_init.css");d("skin.css");var b=!!s_session.sample_value;c.init=function(){$.ajaxsyncget(s_domain.baseuri+"/xman/data/newscontent",function(f){if(f.errNo==0){a.use("news/news_constructor",function(g){var h=g.render(f.data);$("#s_content_2").html(h.tpl);e(h.titleArray,f.data);if(!b){F.call("superplus:skeleton/skeleton","changeTo",2)}else{F.call("superplus:skeleton/skeleton","sendLoadTime",2)}})}else{F.use("superplus:skeleton/skeleton",function(g){g.loadError($("#s_content_2"));if(!b){g.changeTo(2)}else{F.call("superplus:skeleton/skeleton","sendLoadTime",2)}})}})};var e=function(g,h){var f=g;a.use("news/img_action",function(i){i.imgAction(f,h.imgNews)});a.use("news/tab_change",function(i){i.changeTab()});a.use("news/change_for_change",function(i){i.change()});a.use("hotsug/init_sug",function(i){i.initSug()})}});F.call("newsplus:start/news_start","init");F.module("newsplus:common/conf",function(c,b,a){var d=16;b.everyPageItemNum=d});F.addLog("newsplus:news",{newsShow:"0200100000",newsClick:"0200100001",newsHover:"0200100002"});F.addLog("newsplus:hotsug",{newsClick:"0200100001",hotsugClick:"0200200001"});F.module("newsplus:news/news_constructor",function(d,e,k){var h=$("#s_content_"+2);var f=d("newsplus:common/conf");var j=d("newsplus:hotsug/hot_newlabel"),c=d("newsplus:tools/strpx");var g={skeleton:['<div class="s-news-img-ctner">','<div class="img-viewer" num="0">','<div class="img-viewer-cell">#{bigImgs}</div>',"</div>",'<div class="change-bigimg pre-img"><div class="arrow"></div></div>','<div class="change-bigimg next-img"><div class="arrow"></div></div>','<a class="img-title" href="#{url}" target="_blank" hidefocus>#{title}</a>','<div class="img-title-mask"></div>','<div class="img-bars"><div class="img-bars-wrapper"><div class="img-bars-content">#{smallImgs}</div></div></div>',"</div>",'<div class="s-news-news-ctner s-skin-opacity-background">','<div class="hot hot-words first-topic">','<div class="hot-title">','<span class="title-words"><a class="hot-link-baidu" href="http://top.baidu.com/buzz?b=1" target="_blank" hidefocus></a><em>搜索风云榜</em></span>','<span class="title-topic"><a class="hot-link-sina" href="http://huati.weibo.com/?from=right_hot" target="_blank" hidefocus></a><em>热门话题</em></span>','<a class="title-change-words" num="0" href="#" onclick="return false;" hidefocus><span class="bg"></span><span>换一换</span></a>',"</div>",'<div class="hot-content-cell">','<ul class="words-content">',"#{wordsContent}","</ul>",'<ul class="topic-content">',"#{topicContent}","</ul>","</div>","</div>","</div>"].join(""),bigImg:['<a class="big-img-link" href="#{url}" target="_blank">','<img height="260" width="425" src="#{imgUrl}"/>',"</a>"].join(""),smallImg:['<span class="#{curspan}" num="#{num}" name="img">','<img class="news-smallimg-img" height="40" width="68" src="#{imgSmallUrl}"/>','<span class="news-smallimg-mask"></span>',"</span>"].join(""),words:['<li class="words-li #{viewed}" data-num="#{list}">','<div class="words-item">','<a href="#{showlinkurl}" target="_blank" class="hot-item-link" hidefocus>','<em class="dot"></em>','<em class="words-item-content" data-title="#{dataTitle}" data-new="#{newItem}">#{showkey}</em>','<em class="is-new #{showisnew}"></em>',"</a>","</div>","</li>"].join(""),topic:['<li class="topic-li topic-page-#{num} #{viewed}" data-num="#{list}">','<div class="topic-item">','<a href="#{showlinkurl}" target="_blank" class="hot-item-link" hidefocus>','<em class="order topic-icon-#{order}"></em>','<em class="topic-item-content" data-title="#{dataTitle}">#{showtitle}</em>',"</a>","</div>","</li>"].join(""),suggest:['<div class="s-hithot-suggest">','<div class="suggest-shadow"></div>','<div class="suggest-main">','<div class="suggest-main-content">',"#{suggestContent}","</div>","</div>","</div>"].join(""),wordsSuggest:['<div class="suggest-content">',"#{wordsContentStr}","<div>"].join(""),wordsSuggestItem:['<p class="words-item">','<span class="dot"></span>','<a class="words-title"></a>','<span class="words-src"></span>','<span class="words-time"></span>',"</p>"].join(""),wordsSuggestSummary:['<p class="words-summary"></p>'].join(""),topicSuggest:['<div class="suggest-content">','<img class="suggest-topic-img" src="#{topicImg}" title="#{topicImgTitle}"/>','<p class="suggest-topic-title">','<a target="_blank" hidefocus></a>',"<span></span>","</p>",'<p class="suggest-topic-summary">#{topicSummary}</p>',"</div>"].join("")};e.getNewsTpl=function(l){return g[l]};e.dealWordsData=function(n,l){var m=[];$.each(n,function(o,p){if(o>f.everyPageItemNum-1){return}var q={};if(p){q.isNewkey=(j.isInLocal("words",p.key)<=0&&p.isnew=="true")?true:false;q.showisnew=q.isNewkey?"show-new":"";q.showlinkurl=decodeURIComponent(p.linkurl);q.list=o%f.everyPageItemNum;q.dataTitle=p.key;q.newItem=p.isnew=="true"?1:0;q.viewed=j.isInLocal("words",p.key)>=0?"viewed":"";q.showkey=p.key;q.showkey=c.cutStrByLen(q.showkey,q.isNewkey?18:20);m.push($.formatString(l,q))}});return m};e.dealTopicData=function(q,m){var p=[];for(var n=0,l=f.everyPageItemNum;n<l;n++){var r=q[n];if(!r){break}r.showlinkurl=decodeURIComponent(r.linkurl);r.list=n%f.everyPageItemNum;r.dataTitle=r.title;r.num=parseInt(n/f.everyPageItemNum);var o=parseInt(n/2);r.order=n%2==0?(o+1):(o+1+f.everyPageItemNum/2);r.viewed=j.isInLocal("topic",r.title)>=0?"viewed":"";r.showtitle=c.cutStrByLen(r.title,20);p.push($.formatString(m,r))}return p};var i=function(o,l,n){var m=[];$.each(o,function(p,q){var r={};if(q){r.hasImg=((p!==0&&q.type=="img")?g.headlineImg:"");r.realtitle=$.decodeHTML(q.title);r.url=decodeURIComponent(q.url);r.type=q.type;r.hasIcon=((p!==0&&q.type=="img")?"has-img-icon":"");if(p===0){r.title=c.cutStrByLen(q.title,26);m.push($.formatString(l,r))}else{r.title=c.cutStrByLen(q.title,40);m.push($.formatString(n,r))}}});return m};var a=function(n){var m=[],o=[],l=[];$.each(n,function(r,p){var q={};q.num=r;q.title=c.cutStrByLen(p.title,40);q.imgSmallUrl=decodeURIComponent(p.imgSmallUrl);q.imgUrl=decodeURIComponent(p.imgUrl);q.url=decodeURIComponent(p.url);q.curimg=(r==0?"cur-img":"");q.curspan=(r==0?"cur-span click-span":"");m.push({title:q.title,url:q.url});l.push($.formatString(g.bigImg,q));o.push($.formatString(g.smallImg,q))});return{titleArray:m,bigImgHtml:l,smallImgHtml:o}};var b=function(s){var y=[],t=[],r=[],x=[],u=[],n=[],w=j.getLocalData("words"),p=j.getLocalData("topic"),o=[],m=null,l=s.hotWords.length-1,v=null;if(w){for(var q=l;q>=0;q--){if(j.isInArray(w,$.trimAll(s.hotWords[q].key))>=0){m=s.hotWords.splice(q,1);s.hotWords.push(m[0]);o.push(m[0].key)}}}if(p){o=[];for(var q=s.weiboTopics.length-1;q>=0;q--){if(j.isInArray(p,$.trimAll(s.weiboTopics[q].title))>=0){o.push(s.weiboTopics[q].title)}}}k.use("news/words_contructor",function(z){z.saveWordsData(s.hotWords)});v=a(s.imgNews);n=v.titleArray;y=v.bigImgHtml;t=v.smallImgHtml;r=i(s.headline,g.topline,g.otherline);x=e.dealWordsData(s.hotWords,g.words);u=e.dealTopicData(s.weiboTopics,g.topic);return{tpl:$.formatString(g.skeleton,{bigImgs:y.join(""),smallImgs:t.join(""),title:c.cutStrByLen(s.imgNews[0].title,40),url:decodeURIComponent(s.imgNews[0].url),headline:r.join(""),wordsContent:x.join(""),topicContent:u.join("")}),titleArray:n}};e.render=b});F.module("newsplus:news/img_action",function(c,g,l){var i=c("newsplus:tools/throttle"),e=[],f={showSmallImgCount:5,sumImgCount:5},b=true;var k=function(m){$("#s_content_2 .img-viewer-cell").css("left",-m*425);if(e[m].title){$("#s_content_2 .img-title").attr("url",e[m].url).html(e[m].title)}};var j=function(o,p){var n=o,m=null;if(p){$("#s_content_2 .img-viewer-cell").css("left",-n*425);if(e[n].title){$("#s_content_2 .img-title").attr("href",e[n].url).html(e[n].title)}$("#s_content_2 .img-viewer").attr("num",n);$("#s_content_2 .news-smallimg-mask").parent().removeClass("click-span");$('#s_content_2 .img-bars span[num="'+n+'"]').addClass("click-span")}$("#s_content_2 .news-smallimg-mask").parent().removeClass("cur-span");$('#s_content_2 .img-bars span[num="'+n+'"]').addClass("cur-span");if(h("pre")){$("#s_content_2 .pre-img").children(".arrow").addClass("nouse-arrow")}else{if(h("next")){$("#s_content_2 .next-img").children(".arrow").addClass("nouse-arrow")}else{$("#s_content_2 .pre-img").children(".arrow").removeClass("nouse-arrow");$("#s_content_2 .next-img").children(".arrow").removeClass("nouse-arrow")}}};var a=function(n,o){(o&&o.length>0)&&(f.sumImgCount=o.length);var p=false,m=false;e=n;$("#s_content_2 .s-news-img-ctner").on("mouseout",function(){var q=setTimeout(function(){if(m){clearTimeout(q);return}var r=$("#s_content_2 .img-viewer").attr("num");j(r,false)},300)});$("#s_content_2 .s-news-img-ctner").delegate(".news-smallimg-mask","mouseover",function(){var r=$(this).parent(),q=-1;if(!p){p=setTimeout(function(){if(!r.hasClass("cur-span")){q=r.attr("num");if(q<0){return}m=true;j(q,false)}},200)}}).delegate(".news-smallimg-mask","mouseout",function(){if(p){clearTimeout(p);p=false;m=false}}).delegate(".news-smallimg-mask","mousedown",function(r){r.preventDefault();if(!b){return}var s=$(this).parent(),q=s.attr("num");if(q!=$("#s_content_2 .img-viewer").attr("num")){j(q,true);d({toIndex:s.index(),isBtn:false,isSlideOver:b})}l.fire("newsClick",{clickType:"smallImg"})}).delegate(".change-bigimg","mouseover",function(){var r=$(this),q=$("#s_content_2 .img-viewer").attr("num");if(r.hasClass("pre-img")){if(h("pre")){r.children(".arrow").addClass("nouse-arrow")}else{r.children(".arrow").addClass("is-hover")}}else{if(r.hasClass("next-img")){if(h("next")){r.children(".arrow").addClass("nouse-arrow")}else{r.children(".arrow").addClass("is-hover")}}}}).delegate(".change-bigimg","mouseout",function(){var q=$(this);if(q.hasClass("pre-img")){q.children(".arrow").removeClass("is-hover")}else{if(q.hasClass("next-img")){q.children(".arrow").removeClass("is-hover")}}}).delegate(".change-bigimg","click",function(){if(!b){return}var s=$(this),r=$("#s_content_2 .img-viewer").attr("num"),q=r;if(s.hasClass("pre-img")){if(--r<0){return}if(r==0){s.children(".arrow").removeClass("is-hover");s.children(".arrow").addClass("nouse-arrow")}$("#s_content_2 .next-img").children(".arrow").removeClass("nouse-arrow");j(r,true);d({curIndex:$("#s_content_2 .img-bars span[num='"+q+"']").index(),isBtn:true,btn:"pre",isSlideOver:b});l.fire("newsClick",{clickType:"preBigImgArrow"})}else{if(s.hasClass("next-img")){if(++r>f.sumImgCount-1){return}if(r==f.sumImgCount-1){s.children(".arrow").removeClass("is-hover");s.children(".arrow").addClass("nouse-arrow")}$("#s_content_2 .pre-img").children(".arrow").removeClass("nouse-arrow");j(r,true);d({curIndex:$("#s_content_2 .img-bars span[num='"+q+"']").index(),isBtn:true,btn:"next",isSlideOver:b});l.fire("newsClick",{clickType:"nextBigImgArrow"})}}}).delegate(".img-title","click",function(){l.fire("newsClick",{clickType:"bigImgTitle"})}).delegate(".big-img-link","click",function(){l.fire("newsClick",{clickType:"bigImg"})}).mouseenter(function(){$(this).addClass("s-news-img-hasarrow");if(h("pre")){$("#s_content_2 .pre-img").children(".arrow").addClass("nouse-arrow")}else{if(h("next")){$("#s_content_2 .next-img").children(".arrow").addClass("nouse-arrow")}}}).mouseleave(function(){$(this).removeClass("s-news-img-hasarrow")});if($.isIE6){$("#s_content_2 .s-news-img-ctner").delegate(".news-smallimg-img","mouseover",function(){var r=$(this).parent(),q=-1;if(!p){p=setTimeout(function(){if(!r.hasClass("cur-span")){q=r.attr("num");if(q<0){return}j(q,false)}},300)}}).delegate(".news-smallimg-img","mouseout",function(){if(p){clearTimeout(p);p=false}}).delegate(".news-smallimg-img","mousedown",function(){if(!b){return}var r=$(this).parent(),q=r.attr("num");if(q!=$("#s_content_2 .img-viewer").attr("num")){j(q,true);d({toIndex:r.index(),isBtn:false,isSlideOver:b})}})}$("#s_content_2 .news-headlines").delegate(".headline-link","click",function(){var q=$(this).hasClass("topline-link")?"Y":"N",r=$(this).hasClass("has-img-icon");l.fire("newsClick",{clickType:"headLineNews",newsHasIcon:r,newsIsTopLine:q})})};var h=function(n){var m=$("#s_content_2 .img-viewer").attr("num");if(n){return n=="pre"?(m==0):(m==f.sumImgCount-1)}return(m==0)||(m==f.sumImgCount-1)};var d=function(s){b=false;var o=$("#s_content_2 .img-bars-content").position().left;var q="",n=82,r=0,m=parseInt(Math.abs(o)/n);if(!s.isBtn){if(m>0&&s.toIndex-m==0){q="pre"}if(s.toIndex!=f.sumImgCount-1&&s.toIndex-m==f.showSmallImgCount-1){q="next"}}else{if(s.btn=="pre"&&m>0&&(s.curIndex-m==0||s.curIndex-m==1)){q="pre"}if(s.btn=="next"&&f.sumImgCount-f.showSmallImgCount-m>0&&(s.curIndex-m==f.showSmallImgCount-1||s.curIndex-m==f.showSmallImgCount-2)){q="next"}}if(q==""){b=true;return}var p=q=="pre"?(o+82):(o-82);$("#s_content_2 .img-bars-content").animate({left:p},function(){b=true})};g.imgAction=a});F.module("newsplus:news/tab_change",function(c,b,a){var f=c("newsplus:tools/throttle");function e(i){var h=i.type,g=(i.type=="words"?"topic":"words");if(i.dom.parent().parent().hasClass("hot-"+h)){return}i.dom.parent().parent().removeClass("hot-"+g).addClass("hot-"+h);a.fire("newsShow",{showType:h});a.fire("newsClick",{clickType:h})}var d=function(){$("#s_content_2 .hot-title").delegate(".title-words","mouseover",function(){f.throttle(e,null,{type:"words",dom:$(this)},300)}).delegate(".title-words","mouseout",function(){f.clearThrottle(e)}).delegate(".title-topic","mouseout",function(){f.clearThrottle(e)}).delegate(".title-topic","mouseover",function(){f.throttle(e,null,{type:"topic",dom:$(this)},310)})};b.changeTab=d});F.module("newsplus:news/change_for_change",function(f,c,a){var g=f("newsplus:tools/throttle");var b=function(i){var j=i,h=j.attr("num")<0?0:j.attr("num");h++;j.attr("num",h);a.use("news/words_contructor",function(k){k.createWords(h)})};var e=function(i){var j=i,h=j.attr("num")<0?0:j.attr("num");h++;j.attr("num",h);if(h%2){j.parent().parent().removeClass("first-topic").addClass("second-topic")}else{j.parent().parent().removeClass("second-topic").addClass("first-topic")}};var d=function(){var h=0;$("#s_content_2 .hot-title").delegate(".title-change-words","click",function(){var i=$(this);b(i);a.fire("newsClick",{clickType:"wordsChange"})})};c.change=d});F.module("newsplus:news/words_contructor",function(d,c,b){var h=d("newsplus:hotsug/init_sug"),g=d("newsplus:common/conf");var f=null;var e=function(k){var l=$("#s_content_2 .words-content");if(!f||f.length<=0||!l.get(0)){return}var j=k*g.everyPageItemNum,i=j-f.length*parseInt(j/f.length);_showData=null;if(f.length>g.everyPageItemNum){_showData=f.slice(i,i+g.everyPageItemNum);if(_showData.length<g.everyPageItemNum){_showData=_showData.concat(f.slice(0,g.everyPageItemNum-_showData.length))}}else{_showData=f}b.use("news/news_constructor",function(o){var m=o.getNewsTpl("words"),n=o.dealWordsData(_showData,m);l.html(n);h.bindEvent("words")})};var a=function(i){f=i};c.saveWordsData=a;c.createWords=e});F.module("newsplus:hotsug/init_sug",function(b,e,i){var f=b("newsplus:common/conf");var d=null,c="",h;var g=function(l){var j="."+l+"-li",k="."+l+"-item-content",m=$("#s_content_2 .hot-content-cell");if(!m){return}m.find(j).delegate(".hot-item-link","click",function(){var n=$(this).parent().parent(),o=$(this).find(k);i.use("hotsug/hot_newlabel",function(p){p.setLocalData(l,o.attr("data-title"));n.addClass("viewed");n.removeClass("is-new-words")});i.fire("newsClick",{clickType:"wordTopic",newsType:l})}).delegate(".hot-item-link","mouseout",function(){if(d){h=setTimeout(function(){clearTimeout(h);clearTimeout(d);$("#s_news_hotsug").remove();c="";d=null},350)}}).delegate(".hot-item-link","mouseover",function(){var q=$(this),o=q.parent().parent(),n=o.attr("data-num"),p=q.find(k);if(n>=0&&n<=f.everyPageItemNum-1&&p.attr("data-title")!=""){if(c===p.attr("data-title")&&$("#s_news_hotsug").get(0)){return}clearTimeout(h);c=p.attr("data-title");clearTimeout(d);$("#s_news_hotsug").remove();d=null;d=setTimeout(function(){i.use("hotsug/hot_sug",function(r){r.createSug(l,p.attr("data-title"),n,o,function(){$("#s_news_hotsug").mouseenter(function(){clearTimeout(h)})});if(l==="words"){if(p.attr("data-new")==1){o.removeClass("is-new-words")}}});i.use("hotsug/hot_newlabel",function(r){r.setLocalData(l,p.attr("data-title"));q.addClass("viewed");i.fire("hotsugClick",{clickType:"layerShow",newsType:l});q.removeClass("is-new-words")})},500)}});m.find("."+l+"-content").delegate(".hot-link","click",function(){i.fire("hotsugClick",{clickType:"wordTopic",newsType:l})})};var a=function(){g("words");g("topic");$("#s_content_2 .hot-content-cell").mouseleave(function(){if(d){clearTimeout(d);$("#s_news_hotsug").remove();c="";d=null}if($("#s_news_hotsug").get(0)){$("#s_news_hotsug").remove()}})};e.bindEvent=g;e.initSug=a});F.module("newsplus:tools/strpx",function(b,d,i){var c=null,g=$.browser.ie<9?true:false;var e=function(){if(c&&c[0]){return c}else{if($("#s_news_strpx_span")[0]){c=$("#s_news_strpx_span");return c}else{c=$('<span id="s_news_strpx_span"></span>').css({visibility:"hidden",position:"absolute",bottom:0,left:0,fontSize:"12px",fontFamily:'"Microsoft Yahei", "微软雅黑", "宋体", \5b8b\4f53, Tahoma, Arial, Helvetica, STHeiti'}).appendTo($("body"));return c}}};var h=function(j){if(j>128){return true}else{if(!g&&(j==77||j==87||j==109||j==119)){return true}return false}};var a=function(j){return e().html(j).text()};var f=function(n,j){var o=$.decodeHTML(a(n));if(o.length*2<=j){return o}var m=0,l="";for(var k=0;k<o.length;k++){l+=o.charAt(k);if(h(o.charCodeAt(k))){m+=2;if(m>=j){return $.encodeHTML(l.substring(0,l.length-1))+"..."}}else{m+=1;if(m>=j){return $.encodeHTML(l.substring(0,l.length-1))+"..."}}}return $.encodeHTML(l)};d.cutStrByLen=f});F.module("newsplus:tools/throttle",function(c,b,a){b.throttle=function(g,e,d,f){if(g.throttleId){clearTimeout(g.throttleId)}g.throttleId=setTimeout(function(){g.call((e?e:null),d)},(f?f:300))};b.clearThrottle=function(d){if(d.throttleId){clearTimeout(d.throttleId)}}});F.module("newsplus:hotsug/hot_newlabel",function(c,e,m){var d="hotsug_"+s_session.portrait,j={words:60,topic:12},f="@+&+@",l=b("words"),i=b("topic");e.isInLocal=function(o,n){if(o==="words"){return g(l,h(n))}else{if(o==="topic"){return g(i,h(n))}}};function k(o){if(!o){return}if(!o[0]){return h(o)}for(var n=o.length-1;n>=0;n--){o[n]=h(o[n])}return o}e.setOldData=function(n,o){if(n==="words"){l=k(o)}else{if(n==="topic"){i=k(o)}else{return}}e.setLocalData(n)};function b(o){var n=$.localstorage.get(d+"_"+o);if(n.status==0&&n.value&&n.value!=""){return a(n.value.split(f))}else{return false}}e.getLocalData=b;e.setLocalData=function(o,p){var n=null;n=e.getLocalData(o);if(!n){n=[]}if(p&&p!==""){if(g(n,p)<0){n.push(h(p))}}if(n.length>=j[o]){n=n.splice(n.length-j[o]-1,j[o])}$.localstorage.set(d+"_"+o,n.join(f));if(o==="words"&&p&&p!==""&&!l[p]){if(!l[0]){l=[]}l.push(h(p))}else{if(o==="topic"&&p&&p!==""&&!i[p]){if(!i[0]){i=[]}i.push(h(p))}}};function a(n){if(n&&n.length>0){for(var o=n.length-1;o>=0;o--){if(n[o]==""){n.splice(o,1)}}}return n}var g=function(p,o){var q=h(o);if(p&&q){for(var n=p.length-1;n>=0;n--){if(p[n]==q){return n}}}return -1};var h=function(n){return String(n).replace(/\s+/g,"")};e.isInArray=g});